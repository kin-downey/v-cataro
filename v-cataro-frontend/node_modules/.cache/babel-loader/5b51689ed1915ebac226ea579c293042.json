{"remainingRequest":"/Users/ykin/Documents/Projects/v-cataro-frontend/node_modules/babel-loader/lib/index.js!/Users/ykin/Documents/Projects/v-cataro-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ykin/Documents/Projects/v-cataro-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ykin/Documents/Projects/v-cataro-frontend/src/components/Recognition.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ykin/Documents/Projects/v-cataro-frontend/src/components/Recognition.vue","mtime":1635116929642},{"path":"/Users/ykin/Documents/Projects/v-cataro-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ykin/Documents/Projects/v-cataro-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/ykin/Documents/Projects/v-cataro-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ykin/Documents/Projects/v-cataro-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy95a2luL0RvY3VtZW50cy9Qcm9qZWN0cy92LWNhdGFyby1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMveWtpbi9Eb2N1bWVudHMvUHJvamVjdHMvdi1jYXRhcm8tZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBmaXJlYmFzZSBmcm9tICIuLi9maXJlYmFzZS5qcyI7CmltcG9ydCAqIGFzIGZhY2VhcGkgZnJvbSAiZmFjZS1hcGkuanMiOwppbXBvcnQga3Vyb21vamkgZnJvbSAia3Vyb21vamkiOyAvL2ltcG9ydCAqIGFzIGNhbnZhcyBmcm9tICdjYW52YXMnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJ2b2ljZSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dfYnV0dG9uOiB0cnVlLAogICAgICB1c2VyX2VtYWlsOiAiIiwKICAgICAgd29yZDogIiIsCiAgICAgIHRleHQ6ICIiLAogICAgICBhbmdyeTogIiIsCiAgICAgIGRpc2d1c3RlZDogIiIsCiAgICAgIGZlYXJmdWw6ICIiLAogICAgICBoYXBweTogIiIsCiAgICAgIG5ldXRyYWw6ICIiLAogICAgICBzYWQ6ICIiLAogICAgICBzdXJwcmlzZWQ6ICIiLAogICAgICB0aW1lc3RhbXA6ICIiLAogICAgICBjaGFuZ2VkX2lkOiAiIiwKICAgICAgdGltZXI6IG51bGwsCiAgICAgIGNhbnZhczogbnVsbCwKICAgICAgdmlkZW86IG51bGwsCiAgICAgIHJlY29nbml0aW9uOiBudWxsLAogICAgICBrZXlfd29yZDogIiIsCiAgICAgIGNvdW50OiAwLAogICAgICBmbGFnOiBmYWxzZSwKICAgICAgbXNnOiAiIiwKICAgICAgbW92ZV9tb3VzZV9vYmo6IG51bGwsCiAgICAgIHVzZXJfbmFtZTogIuOBk+OCk+OBq+OBoeOBr+OAguOAgiIsCiAgICAgIGFpZHV0aV9vYmo6IG51bGwsCiAgICAgIHJlY29nX2ZsYWc6IDAKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAvL1BD44Gu44OV44Ot44Oz44OI44Kr44Oh44Op44KS6LW35YuV44GX44CB44Oq44Ki44Or44K/44Kk44Og44Gu5pig5YOP44KSdmlkZW/jgr/jgrDjgavooajnpLrjgZnjgosKICAgIHRoaXMudmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmlkZW8iKTsKCiAgICBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkgewogICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7CiAgICAgICAgYXVkaW86IGZhbHNlLAogICAgICAgIHZpZGVvOiB0cnVlCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHN0cmVhbSkgewogICAgICAgIF90aGlzLnZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsKICAgICAgfSk7CiAgICB9CgogICAgdGhpcy5jYW52YXMgPSB0aGlzLiRyZWZzLmNhbnZhczsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uY2xpY2s6IGZ1bmN0aW9uIG9uY2xpY2soKSB7CiAgICAgIHRoaXMuc2hvd19idXR0b24gPSBmYWxzZTsgLy8gdGhpcy5zZXRfZW1haWwoKTsKCiAgICAgIHRoaXMuaW5pdF9yZWNvZ25pdGlvbigpOwogICAgfSwKICAgIHNldF9lbWFpbDogZnVuY3Rpb24gc2V0X2VtYWlsKCkgewogICAgICB2YXIgY3VycmVudF91c2VyID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyOwoKICAgICAgaWYgKGN1cnJlbnRfdXNlciAhPSBudWxsKSB7CiAgICAgICAgaWYgKGN1cnJlbnRfdXNlci5lbWFpbCAhPSBudWxsKSB7CiAgICAgICAgICB0aGlzLnVzZXJfZW1haWwgPSBjdXJyZW50X3VzZXIuZW1haWw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudXNlcl9lbWFpbCA9ICIiOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnVzZXJfZW1haWwgPSAiIjsKICAgICAgfQogICAgfSwKICAgIHNlbmRfdG9fZGI6IGZ1bmN0aW9uIHNlbmRfdG9fZGIoKSB7CiAgICAgIC8vdGhpcy5zZXRfZW1haWwoKTsKICAgICAgdmFyIGNvbHJlZiA9IGZpcmViYXNlLmZpcmVzdG9yZSgpLmNvbGxlY3Rpb24oInRlc3QiKTsgLy8gImRhdGEi44Go44GE44GG5ZCN5YmN44Gu44Kz44Os44Kv44K344On44Oz44G444Gu5Y+C54Wn44KS5L2c5oiQCiAgICAgIC8vIOS/neWtmOeUqEpTT07jg4fjg7zjgr/jgpLkvZzmiJAKCiAgICAgIHZhciBzYXZlRGF0YSA9IHsKICAgICAgICB3b3JkOiB0aGlzLnRleHQsCiAgICAgICAgY3JlYXRlZEF0OiBmaXJlYmFzZS5maXJlc3RvcmUuVGltZXN0YW1wLm5vdygpLAogICAgICAgIHVzZXJfZW1haWw6IHRoaXMudXNlcl9lbWFpbCwKICAgICAgICBhbmdyeTogdGhpcy5hbmdyeSwKICAgICAgICBkaXNndXN0ZWQ6IHRoaXMuZGlzZ3VzdGVkLAogICAgICAgIGZlYXJmdWw6IHRoaXMuZmVhcmZ1bCwKICAgICAgICBoYXBweTogdGhpcy5oYXBweSwKICAgICAgICBuZXV0cmFsOiB0aGlzLm5ldXRyYWwsCiAgICAgICAgc2FkOiB0aGlzLnNhZCwKICAgICAgICBzdXJwcmlzZWQ6IHRoaXMuc3VycHJpc2VkCiAgICAgIH07IC8vIGFkZOOBruW8leaVsOOBq+S/neWtmOOBl+OBn+OBhOODh+ODvOOCv+OCkua4oeOBmQoKICAgICAgY29scmVmLmFkZChzYXZlRGF0YSwgewogICAgICAgIG1lcmdlOiB0cnVlCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge30pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIC8vIOOCqOODqeODvOeZuueUn+aZguOBruWHpueQhgogICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGFkZGluZyBkb2N1bWVudDogIiwgZXJyb3IpOwogICAgICB9KTsKICAgICAgdGhpcy50ZXh0ID0gIiI7CiAgICB9LAogICAgaW5pdF9yZWNvZ25pdGlvbjogZnVuY3Rpb24gaW5pdF9yZWNvZ25pdGlvbigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB0ZXh0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMi5yZWNvZ25pdGlvbiA9IG5ldyB3aW5kb3cud2Via2l0U3BlZWNoUmVjb2duaXRpb24oKTsKICAgICAgICAgICAgICAgIF90aGlzMi5yZWNvZ25pdGlvbi5sYW5nID0gImphLUpQIjsKICAgICAgICAgICAgICAgIF90aGlzMi5yZWNvZ25pdGlvbi5pbnRlcmltUmVzdWx0cyA9IHRydWU7CiAgICAgICAgICAgICAgICBfdGhpczIucmVjb2duaXRpb24uY29udGludW91cyA9IHRydWU7CgogICAgICAgICAgICAgICAgX3RoaXMyLnJlY29nbml0aW9uLm9uZW5kID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidm9pY2UgaXMgZW5kZWQiKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFjZWFwaS5sb2FkU3NkTW9iaWxlbmV0djFNb2RlbCgiL21vZGVscyIpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWNlYXBpLmxvYWRGYWNlRXhwcmVzc2lvbk1vZGVsKCIvbW9kZWxzIik7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF90aGlzMi5mYWNlX3JlY29nKCk7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImNvbXBsZXRlIik7CiAgICAgICAgICAgICAgICB0ZXh0ID0gIuOBk+OCk+OBq+OBoeOBr++8jOS7iuaXpeOBr+m2j+OCkumjn+OBueOBvuOBl+OBn++8jiI7CiAgICAgICAgICAgICAgICBrdXJvbW9qaS5idWlsZGVyKHsKICAgICAgICAgICAgICAgICAgZGljUGF0aDogIi9kaWN0IgogICAgICAgICAgICAgICAgfSkuYnVpbGQoZnVuY3Rpb24gKGVyciwgdG9rZW5pemVyKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbnMgPSB0b2tlbml6ZXIudG9rZW5pemUodGV4dCk7CgogICAgICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0b2tlbnMpLAogICAgICAgICAgICAgICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuLnBvcyA9PSAi5ZCN6KmeIikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJ0b2tlbjogIiwgdG9rZW4uYmFzaWNfZm9ybSk7IC8vIGNvbnN0IGtleV93b3JkID0gdG9rZW4uYmFzaWNfZm9ybTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF90aGlzMi5haWR1dGkoKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMi5zdGFydF9yZWNvZ25pdGlvbigpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc3RhcnRfcmVjb2duaXRpb246IGZ1bmN0aW9uIHN0YXJ0X3JlY29nbml0aW9uKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMucmVjb2duaXRpb24ub25yZXN1bHQgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBmb3IgKHZhciBpID0gZXZlbnQucmVzdWx0SW5kZXg7IGkgPCBldmVudC5yZXN1bHRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgdHJhbnNjcmlwdCA9IGV2ZW50LnJlc3VsdHNbaV1bMF0udHJhbnNjcmlwdDsKCiAgICAgICAgICBpZiAoZXZlbnQucmVzdWx0c1tpXS5pc0ZpbmFsKSB7CiAgICAgICAgICAgIC8vZmluYWxUcmFuc2NyaXB0ICs9IHRyYW5zY3JpcHQ7CiAgICAgICAgICAgIF90aGlzMy50ZXh0ID0gdHJhbnNjcmlwdDsKCiAgICAgICAgICAgIF90aGlzMy5yZWNvZ25pdGlvbi5zdG9wKCk7CgogICAgICAgICAgICBfdGhpczMuYW5hbHlzaXMoX3RoaXMzLnRleHQpOwoKICAgICAgICAgICAgX3RoaXMzLmZhY2VfcmVjb2coKTsKCiAgICAgICAgICAgIF90aGlzMy5zZW5kX3RvX2RiKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgdGhpcy5yZWNvZ25pdGlvbi5zdGFydCgpOwogICAgfSwKICAgIGZhY2VfcmVjb2c6IGZ1bmN0aW9uIGZhY2VfcmVjb2coKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGRldGVjdGlvbldpdGhFeHByZXNzaW9uczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhY2VhcGkuZGV0ZWN0U2luZ2xlRmFjZShfdGhpczQudmlkZW8pLndpdGhGYWNlRXhwcmVzc2lvbnMoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZGV0ZWN0aW9uV2l0aEV4cHJlc3Npb25zID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBfdGhpczQubmV1dHJhbCA9IGRldGVjdGlvbldpdGhFeHByZXNzaW9ucy5leHByZXNzaW9ucy5uZXV0cmFsLCBfdGhpczQuaGFwcHkgPSBkZXRlY3Rpb25XaXRoRXhwcmVzc2lvbnMuZXhwcmVzc2lvbnMuaGFwcHksIF90aGlzNC5zYWQgPSBkZXRlY3Rpb25XaXRoRXhwcmVzc2lvbnMuZXhwcmVzc2lvbnMuc2FkLCBfdGhpczQuYW5ncnkgPSBkZXRlY3Rpb25XaXRoRXhwcmVzc2lvbnMuZXhwcmVzc2lvbnMuYW5ncnksIF90aGlzNC5mZWFyZnVsID0gZGV0ZWN0aW9uV2l0aEV4cHJlc3Npb25zLmV4cHJlc3Npb25zLmZlYXJmdWwsIF90aGlzNC5kaXNndXN0ZWQgPSBkZXRlY3Rpb25XaXRoRXhwcmVzc2lvbnMuZXhwcmVzc2lvbnMuZGlzZ3VzdGVkLCBfdGhpczQuc3VycHJpc2VkID0gZGV0ZWN0aW9uV2l0aEV4cHJlc3Npb25zLmV4cHJlc3Npb25zLnN1cnByaXNlZDsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoX3RoaXM0LmFpZHV0aV9vYmopOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBhbmFseXNpczogZnVuY3Rpb24gYW5hbHlzaXMoaW5wdXRfdGV4dCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciB0ZXh0LCBrZXlfd29yZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGV4dCA9IGlucHV0X3RleHQ7CiAgICAgICAgICAgICAgICBrZXlfd29yZCA9ICIiOwogICAgICAgICAgICAgICAga3Vyb21vamkuYnVpbGRlcih7CiAgICAgICAgICAgICAgICAgIGRpY1BhdGg6ICIvZGljdCIKICAgICAgICAgICAgICAgIH0pLmJ1aWxkKGZ1bmN0aW9uIChlcnIsIHRva2VuaXplcikgewogICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW5zID0gdG9rZW5pemVyLnRva2VuaXplKHRleHQpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRva2VucyksCiAgICAgICAgICAgICAgICAgICAgICAgIF9zdGVwMjsKCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IF9zdGVwMi52YWx1ZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbi5wb3MgPT0gIuWQjeipniIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidG9rZW46ICIsIHRva2VuLmJhc2ljX2Zvcm0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIGtleV93b3JkID0gdG9rZW4uYmFzaWNfZm9ybTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImZvciBrZXlfd29yZDogIiwga2V5X3dvcmQpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczUuc3BlYWsoa2V5X3dvcmQpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYWlkdXRpOiBmdW5jdGlvbiBhaWR1dGkoKSB7CiAgICAgIHZhciB1dHRyID0gbmV3IFNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSgpOwogICAgICB2YXIgbW92ZV9tb3VzZV9vYmogPSB0aGlzLm1vdmVfbW91c2UoKTsKICAgICAgdXR0ci50ZXh0ID0gIuOBk+OCk+OBq+OBoeOBr+OAguaYqOaXpeOBruWknOOBlOmjr+OBq+S9leOCkumjn+OBueOBvuOBl+OBn+OBi++8nyI7CiAgICAgIHV0dHIubGFuZyA9ICJqYSI7CiAgICAgIHNwZWVjaFN5bnRoZXNpcy5zcGVhayh1dHRyKTsKCiAgICAgIHV0dHIub25lbmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbChtb3ZlX21vdXNlX29iaik7CiAgICAgIH07CiAgICB9LAogICAgc3BlYWs6IGZ1bmN0aW9uIHNwZWFrKGtleV93b3JkKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIHV0dHIsIG1vdmVfbW91c2Vfb2JqLCByZWNvZ25pdGlvbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdXR0ciA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UoKTsKICAgICAgICAgICAgICAgIG1vdmVfbW91c2Vfb2JqID0gX3RoaXM2Lm1vdmVfbW91c2UoKTsKICAgICAgICAgICAgICAgIHV0dHIudGV4dCA9ICLjgZ3jgYbjgarjgpPjgafjgZnjga3jgILjgILjgIIiICsga2V5X3dvcmQgKyAi44CC44Gn44GZ44GL77yfIjsKICAgICAgICAgICAgICAgIHV0dHIubGFuZyA9ICJqYSI7CiAgICAgICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMuc3BlYWsodXR0cik7CiAgICAgICAgICAgICAgICBfdGhpczYudXNlcl9uYW1lID0gIiI7CiAgICAgICAgICAgICAgICByZWNvZ25pdGlvbiA9IF90aGlzNi5yZWNvZ25pdGlvbjsgLy8g5ZaL44KK57WC44KP44Gj44Gf44KJ77yM5Y+j44Gu5YuV44GN44KS5q2i44KB44KLCgogICAgICAgICAgICAgICAgdXR0ci5vbmVuZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChtb3ZlX21vdXNlX29iaik7CiAgICAgICAgICAgICAgICAgIHJlY29nbml0aW9uLnN0YXJ0KCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBtb3ZlX21vdXNlOiBmdW5jdGlvbiBtb3ZlX21vdXNlKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHRoaXMubW92ZV9tb3VzZV9vYmogPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM3LmNvdW50Kys7CgogICAgICAgIGlmIChfdGhpczcuY291bnQgJSAyID09IDApIHsKICAgICAgICAgIF90aGlzNy5mbGFnID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXM3LmZsYWcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0sIDUwMCk7CiAgICAgIHJldHVybiB0aGlzLm1vdmVfbW91c2Vfb2JqOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Recognition.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-app>\n    <v-main>\n      <v-row>\n        <v-col align=\"center\">\n          <img\n            v-if=\"flag\"\n            src=\"../../public/CATARO_a_1.png\"\n            alt=\"open_mouse\"\n            width=\"450\"\n            height=\"auto\"\n          />\n          <img\n            v-else\n            src=\"../../public/CATARO_a_2.png\"\n            alt=\"close_mouse\"\n            width=\"450\"\n            height=\"auto\"\n          />\n        </v-col>\n      </v-row>\n      <div v-if=\"show_button\">\n        <v-row align=\"center\">\n          <v-col align=\"center\">\n            <v-btn color=\"primary\" @click=\"onclick()\"> 実験開始 </v-btn>\n          </v-col>\n        </v-row>\n      </div>\n      <div v-else>\n        <v-row align=\"center\">\n          <v-col align=\"center\">\n            <h3>実験が開始されました</h3>\n            <h4>対話開始まで10秒ほどかかる場合があります．</h4>\n          </v-col>\n        </v-row>\n      </div>\n      <v-row class=\"mt-5\">\n        <v-col align=\"center\">\n          <p>{{ text }}</p>\n        </v-col>\n      </v-row>\n      <v-row>\n        <v-col class=\"mx-4\">\n          <div>\n            <p>neutral: {{ neutral }}</p>\n            <p>happy: {{ happy }}</p>\n            <p>angry: {{ angry }}</p>\n            <p>sad: {{ sad }}</p>\n            <p>surprised: {{ surprised }}</p>\n            <p>fearful: {{ fearful }}</p>\n            <p>disgusted: {{ disgusted }}</p>\n          </div>\n        </v-col>\n        <v-col align=\"end\" class=\"mx-4\">\n          <video\n            ref=\"video\"\n            id=\"video\"\n            width=\"300\"\n            height=\"300\"\n            playsinline\n            muted\n            autoplay\n          ></video>\n          <canvas ref=\"canvas\" id=\"myCanvas\" width=\"1\" height=\"1\" />\n        </v-col>\n      </v-row>\n    </v-main>\n  </v-app>\n</template>\n\n<script>\nimport firebase from \"../firebase.js\";\nimport * as faceapi from \"face-api.js\";\nimport kuromoji from \"kuromoji\";\n//import * as canvas from 'canvas';\n\nexport default {\n  name: \"voice\",\n  data() {\n    return {\n      show_button: true,\n      user_email: \"\",\n      word: \"\",\n      text: \"\",\n      angry: \"\",\n      disgusted: \"\",\n      fearful: \"\",\n      happy: \"\",\n      neutral: \"\",\n      sad: \"\",\n      surprised: \"\",\n      timestamp: \"\",\n      changed_id: \"\",\n      timer: null,\n      canvas: null,\n      video: null,\n      recognition: null,\n      key_word: \"\",\n      count: 0,\n      flag: false,\n      msg: \"\",\n      move_mouse_obj: null,\n      user_name: \"こんにちは。。\",\n      aiduti_obj: null,\n      recog_flag: 0,\n    };\n  },\n  mounted() {\n    //PCのフロントカメラを起動し、リアルタイムの映像をvideoタグに表示する\n    this.video = document.getElementById(\"video\");\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices\n        .getUserMedia({ audio: false, video: true })\n        .then((stream) => {\n          this.video.srcObject = stream;\n        });\n    }\n\n    this.canvas = this.$refs.canvas;\n  },\n\n  methods: {\n    onclick() {\n      this.show_button = false;\n      // this.set_email();\n      this.init_recognition();\n    },\n    set_email() {\n      var current_user = firebase.auth().currentUser;\n      if (current_user != null) {\n        if (current_user.email != null) {\n          this.user_email = current_user.email;\n        } else {\n          this.user_email = \"\";\n        }\n      } else {\n        this.user_email = \"\";\n      }\n    },\n    send_to_db() {\n      //this.set_email();\n      const colref = firebase.firestore().collection(\"test\"); // \"data\"という名前のコレクションへの参照を作成\n\n      // 保存用JSONデータを作成\n      const saveData = {\n        word: this.text,\n        createdAt: firebase.firestore.Timestamp.now(),\n        user_email: this.user_email,\n        angry: this.angry,\n        disgusted: this.disgusted,\n        fearful: this.fearful,\n        happy: this.happy,\n        neutral: this.neutral,\n        sad: this.sad,\n        surprised: this.surprised,\n      };\n\n      // addの引数に保存したいデータを渡す\n      colref\n        .add(saveData, { merge: true })\n        .then(function () {})\n        .catch(function (error) {\n          // エラー発生時の処理\n          console.error(\"Error adding document: \", error);\n        });\n      this.text = \"\";\n    },\n    async init_recognition() {\n      this.recognition = new window.webkitSpeechRecognition();\n\n      this.recognition.lang = \"ja-JP\";\n      this.recognition.interimResults = true;\n      this.recognition.continuous = true;\n      this.recognition.onend = function () {\n        console.log(\"voice is ended\");\n      };\n      await faceapi.loadSsdMobilenetv1Model(\"/models\");\n      await faceapi.loadFaceExpressionModel(\"/models\");\n      this.face_recog();\n      console.log(\"complete\");\n      const text = \"こんにちは，今日は鶏を食べました．\";\n      kuromoji.builder({ dicPath: \"/dict\" }).build((err, tokenizer) => {\n        if (err) {\n          console.log(err);\n        } else {\n          const tokens = tokenizer.tokenize(text);\n          for (let token of tokens) {\n            if (token.pos == \"名詞\") {\n              console.log(\"token: \", token.basic_form);\n              // const key_word = token.basic_form;\n            }\n          }\n        }\n        this.aiduti();\n        this.start_recognition();\n      });\n    },\n    start_recognition() {\n      this.recognition.onresult = (event) => {\n        for (let i = event.resultIndex; i < event.results.length; i++) {\n          let transcript = event.results[i][0].transcript;\n          if (event.results[i].isFinal) {\n            //finalTranscript += transcript;\n            this.text = transcript;\n            this.recognition.stop();\n            this.analysis(this.text);\n            this.face_recog();\n            this.send_to_db();\n          }\n        }\n      };\n      this.recognition.start();\n    },\n    async face_recog() {\n      const detectionWithExpressions = await faceapi\n        .detectSingleFace(this.video)\n        .withFaceExpressions();\n\n      (this.neutral = detectionWithExpressions.expressions.neutral),\n        (this.happy = detectionWithExpressions.expressions.happy),\n        (this.sad = detectionWithExpressions.expressions.sad),\n        (this.angry = detectionWithExpressions.expressions.angry),\n        (this.fearful = detectionWithExpressions.expressions.fearful),\n        (this.disgusted = detectionWithExpressions.expressions.disgusted),\n        (this.surprised = detectionWithExpressions.expressions.surprised);\n\n      clearInterval(this.aiduti_obj);\n    },\n    async analysis(input_text) {\n      const text = input_text;\n      var key_word = \"\";\n      kuromoji.builder({ dicPath: \"/dict\" }).build((err, tokenizer) => {\n        if (err) {\n          console.log(err);\n        } else {\n          const tokens = tokenizer.tokenize(text);\n          for (let token of tokens) {\n            if (token.pos == \"名詞\") {\n              console.log(\"token: \", token.basic_form);\n              key_word = token.basic_form;\n            }\n          }\n          console.log(\"for key_word: \", key_word);\n          this.speak(key_word);\n        }\n      });\n    },\n    aiduti() {\n      const uttr = new SpeechSynthesisUtterance();\n      var move_mouse_obj = this.move_mouse();\n      uttr.text = \"こんにちは。昨日の夜ご飯に何を食べましたか？\";\n      uttr.lang = \"ja\";\n      speechSynthesis.speak(uttr);\n      uttr.onend = function () {\n        clearInterval(move_mouse_obj);\n      };\n    },\n    async speak(key_word) {\n      const uttr = new SpeechSynthesisUtterance();\n      var move_mouse_obj = this.move_mouse();\n      uttr.text = \"そうなんですね。。。\" + key_word + \"。ですか？\";\n      uttr.lang = \"ja\";\n      speechSynthesis.speak(uttr);\n      this.user_name = \"\";\n      const recognition = this.recognition;\n      // 喋り終わったら，口の動きを止める\n      uttr.onend = function () {\n        clearInterval(move_mouse_obj);\n        recognition.start();\n      };\n    },\n    move_mouse() {\n      this.move_mouse_obj = setInterval(() => {\n        this.count++;\n        if (this.count % 2 == 0) {\n          this.flag = true;\n        } else {\n          this.flag = false;\n        }\n      }, 500);\n      return this.move_mouse_obj;\n    },\n  },\n};\n</script>\n<style>\n.overlay {\n  position: absolute;\n}\n</style>\n"],"sourceRoot":"src/components"}]}