{"remainingRequest":"/Users/ykin/Documents/Projects/v-cataro-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ykin/Documents/Projects/v-cataro-frontend/src/components/Recognition.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ykin/Documents/Projects/v-cataro-frontend/src/components/Recognition.vue","mtime":1635116929642},{"path":"/Users/ykin/Documents/Projects/v-cataro-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ykin/Documents/Projects/v-cataro-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/ykin/Documents/Projects/v-cataro-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ykin/Documents/Projects/v-cataro-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmaXJlYmFzZSBmcm9tICIuLi9maXJlYmFzZS5qcyI7CmltcG9ydCAqIGFzIGZhY2VhcGkgZnJvbSAiZmFjZS1hcGkuanMiOwppbXBvcnQga3Vyb21vamkgZnJvbSAia3Vyb21vamkiOwovL2ltcG9ydCAqIGFzIGNhbnZhcyBmcm9tICdjYW52YXMnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJ2b2ljZSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dfYnV0dG9uOiB0cnVlLAogICAgICB1c2VyX2VtYWlsOiAiIiwKICAgICAgd29yZDogIiIsCiAgICAgIHRleHQ6ICIiLAogICAgICBhbmdyeTogIiIsCiAgICAgIGRpc2d1c3RlZDogIiIsCiAgICAgIGZlYXJmdWw6ICIiLAogICAgICBoYXBweTogIiIsCiAgICAgIG5ldXRyYWw6ICIiLAogICAgICBzYWQ6ICIiLAogICAgICBzdXJwcmlzZWQ6ICIiLAogICAgICB0aW1lc3RhbXA6ICIiLAogICAgICBjaGFuZ2VkX2lkOiAiIiwKICAgICAgdGltZXI6IG51bGwsCiAgICAgIGNhbnZhczogbnVsbCwKICAgICAgdmlkZW86IG51bGwsCiAgICAgIHJlY29nbml0aW9uOiBudWxsLAogICAgICBrZXlfd29yZDogIiIsCiAgICAgIGNvdW50OiAwLAogICAgICBmbGFnOiBmYWxzZSwKICAgICAgbXNnOiAiIiwKICAgICAgbW92ZV9tb3VzZV9vYmo6IG51bGwsCiAgICAgIHVzZXJfbmFtZTogIuOBk+OCk+OBq+OBoeOBr+OAguOAgiIsCiAgICAgIGFpZHV0aV9vYmo6IG51bGwsCiAgICAgIHJlY29nX2ZsYWc6IDAsCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8vUEPjga7jg5Xjg63jg7Pjg4jjgqvjg6Hjg6njgpLotbfli5XjgZfjgIHjg6rjgqLjg6vjgr/jgqTjg6Djga7mmKDlg4/jgpJ2aWRlb+OCv+OCsOOBq+ihqOekuuOBmeOCiwogICAgdGhpcy52aWRlbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2aWRlbyIpOwogICAgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHsKICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcwogICAgICAgIC5nZXRVc2VyTWVkaWEoeyBhdWRpbzogZmFsc2UsIHZpZGVvOiB0cnVlIH0pCiAgICAgICAgLnRoZW4oKHN0cmVhbSkgPT4gewogICAgICAgICAgdGhpcy52aWRlby5zcmNPYmplY3QgPSBzdHJlYW07CiAgICAgICAgfSk7CiAgICB9CgogICAgdGhpcy5jYW52YXMgPSB0aGlzLiRyZWZzLmNhbnZhczsKICB9LAoKICBtZXRob2RzOiB7CiAgICBvbmNsaWNrKCkgewogICAgICB0aGlzLnNob3dfYnV0dG9uID0gZmFsc2U7CiAgICAgIC8vIHRoaXMuc2V0X2VtYWlsKCk7CiAgICAgIHRoaXMuaW5pdF9yZWNvZ25pdGlvbigpOwogICAgfSwKICAgIHNldF9lbWFpbCgpIHsKICAgICAgdmFyIGN1cnJlbnRfdXNlciA9IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcjsKICAgICAgaWYgKGN1cnJlbnRfdXNlciAhPSBudWxsKSB7CiAgICAgICAgaWYgKGN1cnJlbnRfdXNlci5lbWFpbCAhPSBudWxsKSB7CiAgICAgICAgICB0aGlzLnVzZXJfZW1haWwgPSBjdXJyZW50X3VzZXIuZW1haWw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudXNlcl9lbWFpbCA9ICIiOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnVzZXJfZW1haWwgPSAiIjsKICAgICAgfQogICAgfSwKICAgIHNlbmRfdG9fZGIoKSB7CiAgICAgIC8vdGhpcy5zZXRfZW1haWwoKTsKICAgICAgY29uc3QgY29scmVmID0gZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbigidGVzdCIpOyAvLyAiZGF0YSLjgajjgYTjgYblkI3liY3jga7jgrPjg6zjgq/jgrfjg6fjg7Pjgbjjga7lj4LnhafjgpLkvZzmiJAKCiAgICAgIC8vIOS/neWtmOeUqEpTT07jg4fjg7zjgr/jgpLkvZzmiJAKICAgICAgY29uc3Qgc2F2ZURhdGEgPSB7CiAgICAgICAgd29yZDogdGhpcy50ZXh0LAogICAgICAgIGNyZWF0ZWRBdDogZmlyZWJhc2UuZmlyZXN0b3JlLlRpbWVzdGFtcC5ub3coKSwKICAgICAgICB1c2VyX2VtYWlsOiB0aGlzLnVzZXJfZW1haWwsCiAgICAgICAgYW5ncnk6IHRoaXMuYW5ncnksCiAgICAgICAgZGlzZ3VzdGVkOiB0aGlzLmRpc2d1c3RlZCwKICAgICAgICBmZWFyZnVsOiB0aGlzLmZlYXJmdWwsCiAgICAgICAgaGFwcHk6IHRoaXMuaGFwcHksCiAgICAgICAgbmV1dHJhbDogdGhpcy5uZXV0cmFsLAogICAgICAgIHNhZDogdGhpcy5zYWQsCiAgICAgICAgc3VycHJpc2VkOiB0aGlzLnN1cnByaXNlZCwKICAgICAgfTsKCiAgICAgIC8vIGFkZOOBruW8leaVsOOBq+S/neWtmOOBl+OBn+OBhOODh+ODvOOCv+OCkua4oeOBmQogICAgICBjb2xyZWYKICAgICAgICAuYWRkKHNhdmVEYXRhLCB7IG1lcmdlOiB0cnVlIH0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge30pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgLy8g44Ko44Op44O855m655Sf5pmC44Gu5Yem55CGCiAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBhZGRpbmcgZG9jdW1lbnQ6ICIsIGVycm9yKTsKICAgICAgICB9KTsKICAgICAgdGhpcy50ZXh0ID0gIiI7CiAgICB9LAogICAgYXN5bmMgaW5pdF9yZWNvZ25pdGlvbigpIHsKICAgICAgdGhpcy5yZWNvZ25pdGlvbiA9IG5ldyB3aW5kb3cud2Via2l0U3BlZWNoUmVjb2duaXRpb24oKTsKCiAgICAgIHRoaXMucmVjb2duaXRpb24ubGFuZyA9ICJqYS1KUCI7CiAgICAgIHRoaXMucmVjb2duaXRpb24uaW50ZXJpbVJlc3VsdHMgPSB0cnVlOwogICAgICB0aGlzLnJlY29nbml0aW9uLmNvbnRpbnVvdXMgPSB0cnVlOwogICAgICB0aGlzLnJlY29nbml0aW9uLm9uZW5kID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJ2b2ljZSBpcyBlbmRlZCIpOwogICAgICB9OwogICAgICBhd2FpdCBmYWNlYXBpLmxvYWRTc2RNb2JpbGVuZXR2MU1vZGVsKCIvbW9kZWxzIik7CiAgICAgIGF3YWl0IGZhY2VhcGkubG9hZEZhY2VFeHByZXNzaW9uTW9kZWwoIi9tb2RlbHMiKTsKICAgICAgdGhpcy5mYWNlX3JlY29nKCk7CiAgICAgIGNvbnNvbGUubG9nKCJjb21wbGV0ZSIpOwogICAgICBjb25zdCB0ZXh0ID0gIuOBk+OCk+OBq+OBoeOBr++8jOS7iuaXpeOBr+m2j+OCkumjn+OBueOBvuOBl+OBn++8jiI7CiAgICAgIGt1cm9tb2ppLmJ1aWxkZXIoeyBkaWNQYXRoOiAiL2RpY3QiIH0pLmJ1aWxkKChlcnIsIHRva2VuaXplcikgPT4gewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IHRva2VucyA9IHRva2VuaXplci50b2tlbml6ZSh0ZXh0KTsKICAgICAgICAgIGZvciAobGV0IHRva2VuIG9mIHRva2VucykgewogICAgICAgICAgICBpZiAodG9rZW4ucG9zID09ICLlkI3oqZ4iKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coInRva2VuOiAiLCB0b2tlbi5iYXNpY19mb3JtKTsKICAgICAgICAgICAgICAvLyBjb25zdCBrZXlfd29yZCA9IHRva2VuLmJhc2ljX2Zvcm07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy5haWR1dGkoKTsKICAgICAgICB0aGlzLnN0YXJ0X3JlY29nbml0aW9uKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHN0YXJ0X3JlY29nbml0aW9uKCkgewogICAgICB0aGlzLnJlY29nbml0aW9uLm9ucmVzdWx0ID0gKGV2ZW50KSA9PiB7CiAgICAgICAgZm9yIChsZXQgaSA9IGV2ZW50LnJlc3VsdEluZGV4OyBpIDwgZXZlbnQucmVzdWx0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgbGV0IHRyYW5zY3JpcHQgPSBldmVudC5yZXN1bHRzW2ldWzBdLnRyYW5zY3JpcHQ7CiAgICAgICAgICBpZiAoZXZlbnQucmVzdWx0c1tpXS5pc0ZpbmFsKSB7CiAgICAgICAgICAgIC8vZmluYWxUcmFuc2NyaXB0ICs9IHRyYW5zY3JpcHQ7CiAgICAgICAgICAgIHRoaXMudGV4dCA9IHRyYW5zY3JpcHQ7CiAgICAgICAgICAgIHRoaXMucmVjb2duaXRpb24uc3RvcCgpOwogICAgICAgICAgICB0aGlzLmFuYWx5c2lzKHRoaXMudGV4dCk7CiAgICAgICAgICAgIHRoaXMuZmFjZV9yZWNvZygpOwogICAgICAgICAgICB0aGlzLnNlbmRfdG9fZGIoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICAgIHRoaXMucmVjb2duaXRpb24uc3RhcnQoKTsKICAgIH0sCiAgICBhc3luYyBmYWNlX3JlY29nKCkgewogICAgICBjb25zdCBkZXRlY3Rpb25XaXRoRXhwcmVzc2lvbnMgPSBhd2FpdCBmYWNlYXBpCiAgICAgICAgLmRldGVjdFNpbmdsZUZhY2UodGhpcy52aWRlbykKICAgICAgICAud2l0aEZhY2VFeHByZXNzaW9ucygpOwoKICAgICAgKHRoaXMubmV1dHJhbCA9IGRldGVjdGlvbldpdGhFeHByZXNzaW9ucy5leHByZXNzaW9ucy5uZXV0cmFsKSwKICAgICAgICAodGhpcy5oYXBweSA9IGRldGVjdGlvbldpdGhFeHByZXNzaW9ucy5leHByZXNzaW9ucy5oYXBweSksCiAgICAgICAgKHRoaXMuc2FkID0gZGV0ZWN0aW9uV2l0aEV4cHJlc3Npb25zLmV4cHJlc3Npb25zLnNhZCksCiAgICAgICAgKHRoaXMuYW5ncnkgPSBkZXRlY3Rpb25XaXRoRXhwcmVzc2lvbnMuZXhwcmVzc2lvbnMuYW5ncnkpLAogICAgICAgICh0aGlzLmZlYXJmdWwgPSBkZXRlY3Rpb25XaXRoRXhwcmVzc2lvbnMuZXhwcmVzc2lvbnMuZmVhcmZ1bCksCiAgICAgICAgKHRoaXMuZGlzZ3VzdGVkID0gZGV0ZWN0aW9uV2l0aEV4cHJlc3Npb25zLmV4cHJlc3Npb25zLmRpc2d1c3RlZCksCiAgICAgICAgKHRoaXMuc3VycHJpc2VkID0gZGV0ZWN0aW9uV2l0aEV4cHJlc3Npb25zLmV4cHJlc3Npb25zLnN1cnByaXNlZCk7CgogICAgICBjbGVhckludGVydmFsKHRoaXMuYWlkdXRpX29iaik7CiAgICB9LAogICAgYXN5bmMgYW5hbHlzaXMoaW5wdXRfdGV4dCkgewogICAgICBjb25zdCB0ZXh0ID0gaW5wdXRfdGV4dDsKICAgICAgdmFyIGtleV93b3JkID0gIiI7CiAgICAgIGt1cm9tb2ppLmJ1aWxkZXIoeyBkaWNQYXRoOiAiL2RpY3QiIH0pLmJ1aWxkKChlcnIsIHRva2VuaXplcikgPT4gewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IHRva2VucyA9IHRva2VuaXplci50b2tlbml6ZSh0ZXh0KTsKICAgICAgICAgIGZvciAobGV0IHRva2VuIG9mIHRva2VucykgewogICAgICAgICAgICBpZiAodG9rZW4ucG9zID09ICLlkI3oqZ4iKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coInRva2VuOiAiLCB0b2tlbi5iYXNpY19mb3JtKTsKICAgICAgICAgICAgICBrZXlfd29yZCA9IHRva2VuLmJhc2ljX2Zvcm07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGNvbnNvbGUubG9nKCJmb3Iga2V5X3dvcmQ6ICIsIGtleV93b3JkKTsKICAgICAgICAgIHRoaXMuc3BlYWsoa2V5X3dvcmQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYWlkdXRpKCkgewogICAgICBjb25zdCB1dHRyID0gbmV3IFNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSgpOwogICAgICB2YXIgbW92ZV9tb3VzZV9vYmogPSB0aGlzLm1vdmVfbW91c2UoKTsKICAgICAgdXR0ci50ZXh0ID0gIuOBk+OCk+OBq+OBoeOBr+OAguaYqOaXpeOBruWknOOBlOmjr+OBq+S9leOCkumjn+OBueOBvuOBl+OBn+OBi++8nyI7CiAgICAgIHV0dHIubGFuZyA9ICJqYSI7CiAgICAgIHNwZWVjaFN5bnRoZXNpcy5zcGVhayh1dHRyKTsKICAgICAgdXR0ci5vbmVuZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjbGVhckludGVydmFsKG1vdmVfbW91c2Vfb2JqKTsKICAgICAgfTsKICAgIH0sCiAgICBhc3luYyBzcGVhayhrZXlfd29yZCkgewogICAgICBjb25zdCB1dHRyID0gbmV3IFNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSgpOwogICAgICB2YXIgbW92ZV9tb3VzZV9vYmogPSB0aGlzLm1vdmVfbW91c2UoKTsKICAgICAgdXR0ci50ZXh0ID0gIuOBneOBhuOBquOCk+OBp+OBmeOBreOAguOAguOAgiIgKyBrZXlfd29yZCArICLjgILjgafjgZnjgYvvvJ8iOwogICAgICB1dHRyLmxhbmcgPSAiamEiOwogICAgICBzcGVlY2hTeW50aGVzaXMuc3BlYWsodXR0cik7CiAgICAgIHRoaXMudXNlcl9uYW1lID0gIiI7CiAgICAgIGNvbnN0IHJlY29nbml0aW9uID0gdGhpcy5yZWNvZ25pdGlvbjsKICAgICAgLy8g5ZaL44KK57WC44KP44Gj44Gf44KJ77yM5Y+j44Gu5YuV44GN44KS5q2i44KB44KLCiAgICAgIHV0dHIub25lbmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbChtb3ZlX21vdXNlX29iaik7CiAgICAgICAgcmVjb2duaXRpb24uc3RhcnQoKTsKICAgICAgfTsKICAgIH0sCiAgICBtb3ZlX21vdXNlKCkgewogICAgICB0aGlzLm1vdmVfbW91c2Vfb2JqID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIHRoaXMuY291bnQrKzsKICAgICAgICBpZiAodGhpcy5jb3VudCAlIDIgPT0gMCkgewogICAgICAgICAgdGhpcy5mbGFnID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5mbGFnID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9LCA1MDApOwogICAgICByZXR1cm4gdGhpcy5tb3ZlX21vdXNlX29iajsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Recognition.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Recognition.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-app>\n    <v-main>\n      <v-row>\n        <v-col align=\"center\">\n          <img\n            v-if=\"flag\"\n            src=\"../../public/CATARO_a_1.png\"\n            alt=\"open_mouse\"\n            width=\"450\"\n            height=\"auto\"\n          />\n          <img\n            v-else\n            src=\"../../public/CATARO_a_2.png\"\n            alt=\"close_mouse\"\n            width=\"450\"\n            height=\"auto\"\n          />\n        </v-col>\n      </v-row>\n      <div v-if=\"show_button\">\n        <v-row align=\"center\">\n          <v-col align=\"center\">\n            <v-btn color=\"primary\" @click=\"onclick()\"> 実験開始 </v-btn>\n          </v-col>\n        </v-row>\n      </div>\n      <div v-else>\n        <v-row align=\"center\">\n          <v-col align=\"center\">\n            <h3>実験が開始されました</h3>\n            <h4>対話開始まで10秒ほどかかる場合があります．</h4>\n          </v-col>\n        </v-row>\n      </div>\n      <v-row class=\"mt-5\">\n        <v-col align=\"center\">\n          <p>{{ text }}</p>\n        </v-col>\n      </v-row>\n      <v-row>\n        <v-col class=\"mx-4\">\n          <div>\n            <p>neutral: {{ neutral }}</p>\n            <p>happy: {{ happy }}</p>\n            <p>angry: {{ angry }}</p>\n            <p>sad: {{ sad }}</p>\n            <p>surprised: {{ surprised }}</p>\n            <p>fearful: {{ fearful }}</p>\n            <p>disgusted: {{ disgusted }}</p>\n          </div>\n        </v-col>\n        <v-col align=\"end\" class=\"mx-4\">\n          <video\n            ref=\"video\"\n            id=\"video\"\n            width=\"300\"\n            height=\"300\"\n            playsinline\n            muted\n            autoplay\n          ></video>\n          <canvas ref=\"canvas\" id=\"myCanvas\" width=\"1\" height=\"1\" />\n        </v-col>\n      </v-row>\n    </v-main>\n  </v-app>\n</template>\n\n<script>\nimport firebase from \"../firebase.js\";\nimport * as faceapi from \"face-api.js\";\nimport kuromoji from \"kuromoji\";\n//import * as canvas from 'canvas';\n\nexport default {\n  name: \"voice\",\n  data() {\n    return {\n      show_button: true,\n      user_email: \"\",\n      word: \"\",\n      text: \"\",\n      angry: \"\",\n      disgusted: \"\",\n      fearful: \"\",\n      happy: \"\",\n      neutral: \"\",\n      sad: \"\",\n      surprised: \"\",\n      timestamp: \"\",\n      changed_id: \"\",\n      timer: null,\n      canvas: null,\n      video: null,\n      recognition: null,\n      key_word: \"\",\n      count: 0,\n      flag: false,\n      msg: \"\",\n      move_mouse_obj: null,\n      user_name: \"こんにちは。。\",\n      aiduti_obj: null,\n      recog_flag: 0,\n    };\n  },\n  mounted() {\n    //PCのフロントカメラを起動し、リアルタイムの映像をvideoタグに表示する\n    this.video = document.getElementById(\"video\");\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices\n        .getUserMedia({ audio: false, video: true })\n        .then((stream) => {\n          this.video.srcObject = stream;\n        });\n    }\n\n    this.canvas = this.$refs.canvas;\n  },\n\n  methods: {\n    onclick() {\n      this.show_button = false;\n      // this.set_email();\n      this.init_recognition();\n    },\n    set_email() {\n      var current_user = firebase.auth().currentUser;\n      if (current_user != null) {\n        if (current_user.email != null) {\n          this.user_email = current_user.email;\n        } else {\n          this.user_email = \"\";\n        }\n      } else {\n        this.user_email = \"\";\n      }\n    },\n    send_to_db() {\n      //this.set_email();\n      const colref = firebase.firestore().collection(\"test\"); // \"data\"という名前のコレクションへの参照を作成\n\n      // 保存用JSONデータを作成\n      const saveData = {\n        word: this.text,\n        createdAt: firebase.firestore.Timestamp.now(),\n        user_email: this.user_email,\n        angry: this.angry,\n        disgusted: this.disgusted,\n        fearful: this.fearful,\n        happy: this.happy,\n        neutral: this.neutral,\n        sad: this.sad,\n        surprised: this.surprised,\n      };\n\n      // addの引数に保存したいデータを渡す\n      colref\n        .add(saveData, { merge: true })\n        .then(function () {})\n        .catch(function (error) {\n          // エラー発生時の処理\n          console.error(\"Error adding document: \", error);\n        });\n      this.text = \"\";\n    },\n    async init_recognition() {\n      this.recognition = new window.webkitSpeechRecognition();\n\n      this.recognition.lang = \"ja-JP\";\n      this.recognition.interimResults = true;\n      this.recognition.continuous = true;\n      this.recognition.onend = function () {\n        console.log(\"voice is ended\");\n      };\n      await faceapi.loadSsdMobilenetv1Model(\"/models\");\n      await faceapi.loadFaceExpressionModel(\"/models\");\n      this.face_recog();\n      console.log(\"complete\");\n      const text = \"こんにちは，今日は鶏を食べました．\";\n      kuromoji.builder({ dicPath: \"/dict\" }).build((err, tokenizer) => {\n        if (err) {\n          console.log(err);\n        } else {\n          const tokens = tokenizer.tokenize(text);\n          for (let token of tokens) {\n            if (token.pos == \"名詞\") {\n              console.log(\"token: \", token.basic_form);\n              // const key_word = token.basic_form;\n            }\n          }\n        }\n        this.aiduti();\n        this.start_recognition();\n      });\n    },\n    start_recognition() {\n      this.recognition.onresult = (event) => {\n        for (let i = event.resultIndex; i < event.results.length; i++) {\n          let transcript = event.results[i][0].transcript;\n          if (event.results[i].isFinal) {\n            //finalTranscript += transcript;\n            this.text = transcript;\n            this.recognition.stop();\n            this.analysis(this.text);\n            this.face_recog();\n            this.send_to_db();\n          }\n        }\n      };\n      this.recognition.start();\n    },\n    async face_recog() {\n      const detectionWithExpressions = await faceapi\n        .detectSingleFace(this.video)\n        .withFaceExpressions();\n\n      (this.neutral = detectionWithExpressions.expressions.neutral),\n        (this.happy = detectionWithExpressions.expressions.happy),\n        (this.sad = detectionWithExpressions.expressions.sad),\n        (this.angry = detectionWithExpressions.expressions.angry),\n        (this.fearful = detectionWithExpressions.expressions.fearful),\n        (this.disgusted = detectionWithExpressions.expressions.disgusted),\n        (this.surprised = detectionWithExpressions.expressions.surprised);\n\n      clearInterval(this.aiduti_obj);\n    },\n    async analysis(input_text) {\n      const text = input_text;\n      var key_word = \"\";\n      kuromoji.builder({ dicPath: \"/dict\" }).build((err, tokenizer) => {\n        if (err) {\n          console.log(err);\n        } else {\n          const tokens = tokenizer.tokenize(text);\n          for (let token of tokens) {\n            if (token.pos == \"名詞\") {\n              console.log(\"token: \", token.basic_form);\n              key_word = token.basic_form;\n            }\n          }\n          console.log(\"for key_word: \", key_word);\n          this.speak(key_word);\n        }\n      });\n    },\n    aiduti() {\n      const uttr = new SpeechSynthesisUtterance();\n      var move_mouse_obj = this.move_mouse();\n      uttr.text = \"こんにちは。昨日の夜ご飯に何を食べましたか？\";\n      uttr.lang = \"ja\";\n      speechSynthesis.speak(uttr);\n      uttr.onend = function () {\n        clearInterval(move_mouse_obj);\n      };\n    },\n    async speak(key_word) {\n      const uttr = new SpeechSynthesisUtterance();\n      var move_mouse_obj = this.move_mouse();\n      uttr.text = \"そうなんですね。。。\" + key_word + \"。ですか？\";\n      uttr.lang = \"ja\";\n      speechSynthesis.speak(uttr);\n      this.user_name = \"\";\n      const recognition = this.recognition;\n      // 喋り終わったら，口の動きを止める\n      uttr.onend = function () {\n        clearInterval(move_mouse_obj);\n        recognition.start();\n      };\n    },\n    move_mouse() {\n      this.move_mouse_obj = setInterval(() => {\n        this.count++;\n        if (this.count % 2 == 0) {\n          this.flag = true;\n        } else {\n          this.flag = false;\n        }\n      }, 500);\n      return this.move_mouse_obj;\n    },\n  },\n};\n</script>\n<style>\n.overlay {\n  position: absolute;\n}\n</style>\n"]}]}